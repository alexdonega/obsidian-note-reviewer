---
phase: 01-authentication
plan: 03
type: execute
wave: 2
depends_on: ["01-01", "01-02"]
files_modified:
  - components/auth/AuthLayout.tsx
  - components/auth/LoginForm.tsx
  - components/auth/SignupForm.tsx
  - app/auth/login/page.tsx
  - app/auth/signup/page.tsx
  - app/auth/reset-password/page.tsx
autonomous: false
user_setup: []

must_haves:
  truths:
    - "Login page exists at /login with split-screen layout (branding left, form right)"
    - "Signup page exists at /signup with split-screen layout"
    - "User can sign in with email/password or OAuth (Google primary, then GitHub)"
    - "User can sign up with email/password or OAuth"
    - "OAuth button text is 'Entrar com Google' and 'Entrar com GitHub' (per locked decision)"
    - "Links exist to switch between login and signup"
  artifacts:
    - path: "components/auth/AuthLayout.tsx"
      provides: "Split-screen layout wrapper"
      contains: "grid lg:grid-cols-2"
      min_lines: 30
    - path: "components/auth/LoginForm.tsx"
      provides: "Email/password + OAuth login form"
      contains: "Entrar com Google"
      min_lines: 60
    - path: "components/auth/SignupForm.tsx"
      provides: "Email/password + OAuth signup form"
      contains: "Entrar com Google"
      min_lines: 60
    - path: "app/auth/login/page.tsx"
      provides: "Login page route"
      contains: "LoginForm"
      min_lines: 15
    - path: "app/auth/signup/page.tsx"
      provides: "Signup page route"
      contains: "SignupForm"
      min_lines: 15
  key_links:
    - from: "components/auth/LoginForm.tsx"
      to: "lib/auth/hooks.ts"
      via: "import useAuth"
      pattern: "useAuth.*signIn"
    - from: "components/auth/AuthLayout.tsx"
      to: "app/auth/login/page.tsx"
      via: "import and wrap form"
      pattern: "AuthLayout"
---

<objective>
Create dedicated login and signup pages with split-screen layout, email/password forms, and OAuth buttons (Google primary, then GitHub).

Purpose: Provides the authentication UI that users interact with to sign in and create accounts. Split-screen layout per locked decision, dedicated pages (not modals) per locked decision.

Output: AuthLayout component, LoginForm, SignupForm, login/signup pages.
</objective>

<execution_context>
@C:\Users\Alex\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Alex\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/phases/01-authentication/01-RESEARCH.md
@.planning/phases/01-authentication/01-01-PLAN.md
@.planning/phases/01-authentication/01-02-PLAN.md

# Locked decisions (from Phase Context):
- Login/Signup are DEDICATED PAGES (/login, /signup), not modals
- Split screen layout: half branding, half form
- Google is PRIMARY OAuth (first button)
- OAuth button text: "Entrar com Google" / "Entrar com GitHub"
- Toggle between login/signup via LINKS ("Não tem conta? Cadastre-se")
- Email marked "not verified" but NOT blocking

# Research-based patterns:
- Pattern 4: Split-Screen Auth Layout
- Form validation with Zod
- Toast notifications for errors (react-hot-toast)

# Claude's discretion (from research):
- Toast notifications for OAuth errors
- Friendly error messages
</context>

<tasks>

<task type="auto">
  <name>Create split-screen AuthLayout component</name>
  <files>components/auth/AuthLayout.tsx</files>
  <action>
Create components/auth/AuthLayout.tsx:

```typescript
import { ReactNode } from 'react'

interface AuthLayoutProps {
  children: ReactNode
  title: string
  description?: string
}

export function AuthLayout({ children, title, description }: AuthLayoutProps) {
  return (
    <div className="min-h-screen grid lg:grid-cols-2">
      {/* Left side - Branding */}
      <div className="hidden lg:flex flex-col justify-between bg-muted p-12">
        <div className="space-y-4">
          <h1 className="text-4xl font-bold">Obsidian Note Reviewer</h1>
          <p className="text-lg text-muted-foreground">
            Revisão visual de markdown com integração perfeita ao Claude Code
          </p>
        </div>
        <div className="space-y-4">
          <p className="text-sm text-muted-foreground">
            Colabore em tempo real, adicione anotações visuais, e muito mais.
          </p>
        </div>
      </div>

      {/* Right side - Form */}
      <div className="flex items-center justify-center p-8">
        <div className="w-full max-w-md space-y-8">
          <div className="space-y-2">
            <h2 className="text-3xl font-bold tracking-tight">{title}</h2>
            {description && (
              <p className="text-muted-foreground">{description}</p>
            )}
          </div>
          {children}
        </div>
      </div>
    </div>
  )
}
```

This implements the split-screen layout per locked decision. Left side shows branding, right side shows form. Hidden on mobile (responsive).
  </action>
  <verify>test -f components/auth/AuthLayout.tsx && grep -q "grid lg:grid-cols-2" components/auth/AuthLayout.tsx</verify>
  <done>components/auth/AuthLayout.tsx renders split-screen layout with branding left and form right</done>
</task>

<task type="auto">
  <name>Create LoginForm with email/password and OAuth</name>
  <files>components/auth/LoginForm.tsx</files>
  <action>
Create components/auth/LoginForm.tsx:

```typescript
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import Link from 'next/link'
import { useAuth } from '@/lib/auth/hooks'
import toast from 'react-hot-toast'

export function LoginForm() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [loading, setLoading] = useState(false)
  const { signIn, signInWithOAuth } = useAuth()
  const router = useRouter()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      await signIn(email, password)
      toast.success('Login realizado com sucesso!')
      router.push('/dashboard')
    } catch (error: any) {
      toast.error(error.message || 'Erro ao fazer login. Tente novamente.')
    } finally {
      setLoading(false)
    }
  }

  const handleOAuthSignIn = async (provider: 'google' | 'github') => {
    try {
      await signInWithOAuth(provider)
    } catch (error: any) {
      if (error.message !== 'User cancelled') {
        toast.error(`Não foi possível entrar com ${provider === 'google' ? 'Google' : 'GitHub'}. Tente novamente.`)
      }
    }
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      {/* OAuth Buttons - Google FIRST (primary per locked decision) */}
      <div className="space-y-3">
        <button
          type="button"
          onClick={() => handleOAuthSignIn('google')}
          className="w-full flex items-center justify-center gap-2 px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors"
        >
          <svg className="w-5 h-5" viewBox="0 0 24 24">
            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Entrar com Google
        </button>

        <button
          type="button"
          onClick={() => handleOAuthSignIn('github')}
          className="w-full flex items-center justify-center gap-2 px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors"
        >
          <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          Entrar com GitHub
        </button>
      </div>

      <div className="relative">
        <div className="absolute inset-0 flex items-center">
          <span className="w-full border-t" />
        </div>
        <div className="relative flex justify-center text-xs uppercase">
          <span className="bg-background px-2 text-muted-foreground">Ou continue com</span>
        </div>
      </div>

      {/* Email/Password Form */}
      <div className="space-y-4">
        <div>
          <label htmlFor="email" className="block text-sm font-medium mb-1">
            Email
          </label>
          <input
            id="email"
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            className="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
            placeholder="seu@email.com"
          />
        </div>

        <div>
          <label htmlFor="password" className="block text-sm font-medium mb-1">
            Senha
          </label>
          <input
            id="password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            className="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
            placeholder="••••••••"
          />
        </div>

        <div className="flex items-center justify-between">
          <Link
            href="/auth/forgot-password"
            className="text-sm text-muted-foreground hover:underline"
          >
            Esqueceu sua senha?
          </Link>
        </div>

        <button
          type="submit"
          disabled={loading}
          className="w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {loading ? 'Entrando...' : 'Entrar'}
        </button>
      </div>

      <p className="text-center text-sm text-muted-foreground">
        Não tem conta?{' '}
        <Link href="/auth/signup" className="text-primary hover:underline">
          Cadastre-se
        </Link>
      </p>
    </form>
  )
}
```

NOTES:
- Google button is FIRST (primary OAuth per locked decision)
- Button text: "Entrar com Google" / "Entrar com GitHub" (per locked decision)
- Toggle link: "Não tem conta? Cadastre-se" (per locked decision)
- Toast notifications for errors (per Claude's discretion from research)
- Redirects to /dashboard on success
  </action>
  <verify>test -f components/auth/LoginForm.tsx && grep -q "Entrar com Google" components/auth/LoginForm.tsx && grep -q "Cadastre-se" components/auth/LoginForm.tsx</verify>
  <done>components/auth/LoginForm.tsx renders login form with email/password and OAuth buttons (Google first)</done>
</task>

<task type="auto">
  <name>Create SignupForm with email/password and OAuth</name>
  <files>components/auth/SignupForm.tsx</files>
  <action>
Create components/auth/SignupForm.tsx:

```typescript
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import Link from 'next/link'
import { useAuth } from '@/lib/auth/hooks'
import toast from 'react-hot-toast'

export function SignupForm() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [confirmPassword, setConfirmPassword] = useState('')
  const [loading, setLoading] = useState(false)
  const { signUp, signInWithOAuth } = useAuth()
  const router = useRouter()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()

    if (password !== confirmPassword) {
      toast.error('As senhas não coincidem')
      return
    }

    if (password.length < 6) {
      toast.error('A senha deve ter pelo menos 6 caracteres')
      return
    }

    setLoading(true)

    try {
      await signUp(email, password)
      toast.success('Conta criada com sucesso!')
      router.push('/welcome')
    } catch (error: any) {
      toast.error(error.message || 'Erro ao criar conta. Tente novamente.')
    } finally {
      setLoading(false)
    }
  }

  const handleOAuthSignIn = async (provider: 'google' | 'github') => {
    try {
      await signInWithOAuth(provider)
    } catch (error: any) {
      if (error.message !== 'User cancelled') {
        toast.error(`Não foi possível entrar com ${provider === 'google' ? 'Google' : 'GitHub'}. Tente novamente.`)
      }
    }
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      {/* OAuth Buttons - Google FIRST (primary per locked decision) */}
      <div className="space-y-3">
        <button
          type="button"
          onClick={() => handleOAuthSignIn('google')}
          className="w-full flex items-center justify-center gap-2 px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors"
        >
          <svg className="w-5 h-5" viewBox="0 0 24 24">
            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Entrar com Google
        </button>

        <button
          type="button"
          onClick={() => handleOAuthSignIn('github')}
          className="w-full flex items-center justify-center gap-2 px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors"
        >
          <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          Entrar com GitHub
        </button>
      </div>

      <div className="relative">
        <div className="absolute inset-0 flex items-center">
          <span className="w-full border-t" />
        </div>
        <div className="relative flex justify-center text-xs uppercase">
          <span className="bg-background px-2 text-muted-foreground">Ou continue com</span>
        </div>
      </div>

      {/* Email/Password Form */}
      <div className="space-y-4">
        <div>
          <label htmlFor="email" className="block text-sm font-medium mb-1">
            Email
          </label>
          <input
            id="email"
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            className="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
            placeholder="seu@email.com"
          />
        </div>

        <div>
          <label htmlFor="password" className="block text-sm font-medium mb-1">
            Senha
          </label>
          <input
            id="password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            minLength={6}
            className="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
            placeholder="Mínimo 6 caracteres"
          />
        </div>

        <div>
          <label htmlFor="confirmPassword" className="block text-sm font-medium mb-1">
            Confirmar Senha
          </label>
          <input
            id="confirmPassword"
            type="password"
            value={confirmPassword}
            onChange={(e) => setConfirmPassword(e.target.value)}
            required
            minLength={6}
            className="w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
            placeholder="Digite a senha novamente"
          />
        </div>

        <button
          type="submit"
          disabled={loading}
          className="w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {loading ? 'Criando conta...' : 'Criar conta'}
        </button>
      </div>

      <p className="text-center text-sm text-muted-foreground">
        Já tem conta?{' '}
        <Link href="/auth/login" className="text-primary hover:underline">
          Faça login
        </Link>
      </p>
    </form>
  )
}
```

NOTES:
- Google button is FIRST (primary OAuth per locked decision)
- Password confirmation validation
- Redirects to /welcome on success (onboarding flow per locked decision)
- Toggle link: "Já tem conta? Faça login"
  </action>
  <verify>test -f components/auth/SignupForm.tsx && grep -q "Entrar com Google" components/auth/SignupForm.tsx && grep -q "Criar conta" components/auth/SignupForm.tsx</verify>
  <done>components/auth/SignupForm.tsx renders signup form with email/password confirmation and OAuth buttons (Google first)</done>
</task>

<task type="auto">
  <name>Create login page route</name>
  <files>app/auth/login/page.tsx</files>
  <action>
Create app/auth/login/page.tsx:

```typescript
import { AuthLayout } from '@/components/auth/AuthLayout'
import { LoginForm } from '@/components/auth/LoginForm'

export default function LoginPage() {
  return (
    <AuthLayout
      title="Entrar"
      description="Bem-vindo de volta! Faça login para continuar."
    >
      <LoginForm />
    </AuthLayout>
  )
}
```

This creates the /login route (per locked decision - dedicated page, not modal).
  </action>
  <verify>test -f app/auth/login/page.tsx && grep -q "LoginForm" app/auth/login/page.tsx</verify>
  <done>app/auth/login/page.tsx renders AuthLayout with LoginForm</done>
</task>

<task type="auto">
  <name>Create signup page route</name>
  <files>app/auth/signup/page.tsx</files>
  <action>
Create app/auth/signup/page.tsx:

```typescript
import { AuthLayout } from '@/components/auth/AuthLayout'
import { SignupForm } from '@/components/auth/SignupForm'

export default function SignupPage() {
  return (
    <AuthLayout
      title="Criar conta"
      description="Comece sua jornada de revisão visual de notas."
    >
      <SignupForm />
    </AuthLayout>
  )
}
```

This creates the /signup route (per locked decision - dedicated page, not modal).
  </action>
  <verify>test -f app/auth/signup/page.tsx && grep -q "SignupForm" app/auth/signup/page.tsx</verify>
  <done>app/auth/signup/page.tsx renders AuthLayout with SignupForm</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Login and signup pages with split-screen layout, email/password forms, and OAuth buttons (Google primary)</what-built>
  <how-to-verify>
1. Run: npm run dev
2. Visit http://localhost:3000/auth/login
3. Verify split-screen layout (branding on left, form on right)
4. Verify Google button is first and has correct text "Entrar com Google"
5. Verify GitHub button has correct text "Entrar com GitHub"
6. Click "Não tem conta? Cadastre-se" link - should go to /auth/signup
7. On signup page, verify form has password confirmation
8. Click "Já tem conta? Faça login" link - should go back to /auth/login
9. Check mobile responsiveness (split screen should be hidden on mobile)
10. Test form validation (empty email, short password, mismatched passwords)
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
After completing all tasks and approval:

1. Run: npm run build to verify no TypeScript errors
2. Check routes: ls app/auth/login/page.tsx app/auth/signup/page.tsx
3. Verify OAuth button order: grep -A1 "Entrar com" components/auth/LoginForm.tsx | head -5
</verification>

<success_criteria>
- Login page accessible at /auth/login with split-screen layout
- Signup page accessible at /auth/signup with split-screen layout
- Google OAuth button appears first (primary)
- Both pages have toggle links between login/signup
- Forms validate correctly on client side
- Toast notifications show for errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication/01-03-SUMMARY.md` with:
- Pages created
- Layout implementation details
- OAuth button order confirmation
- Any UI/UX notes
</output>
